#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

use App\FakeAiService; // Se importa la clase FakeAiService

$aiService = new FakeAiService(); // Instancia del servicio de IA

// Mensaje de bienvenida
echo "Bienvenido a Oraculo, tu asistente de inteligencia artificial." . PHP_EOL;
echo "Pregunte cualquier cosa y te responderé." . PHP_EOL;

// Bucle para recibir preguntas
while (true) {
    $pregunta = readline("> ");

    if (strtolower($pregunta) === 'salir' || strtolower($pregunta) === 'exit') {

        $respuesta = $aiService->getResponse($pregunta) . PHP_EOL;

        echo $respuesta; // Se muestra la respuesta de salida

        break; // Sale del bucle si el usuario escribe 'salir' o 'exit'
    }

    echo "Pensando en la respuesta..." . PHP_EOL;

    $respuesta = $aiService->getResponse($pregunta); // Se obtiene la respuesta del servicio de IA

    echo $respuesta . PHP_EOL; // Se muestra la respuesta
    
    echo "¿Tienes otra pregunta? (escribe 'salir' para terminar)" . PHP_EOL;
}